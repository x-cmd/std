# shellcheck shell=sh disable=SC3043,SC2120 # xrc

xrc:mod:lib boot mod rc

___x_cmd_boot(){
    local subcmd="$1"; [ $# -gt 0 ] && shift
    if ! mkdir -p "$HOME/.x-cmd/.boot"; then
        printf "boot abort for mkdir fails: %s\n" "$HOME/.x-cmd/.boot" >/dev/stderr
        return 1
    fi

    case "$subcmd" in
        setup)          xrc:mod boot/lib/setup ;;
        rc)             ___x_cmd_boot_rc "$@" ;;
        mod)            ___x_cmd_boot_mod "$@" ;;
        *)              xrc advise/lib/advise_get
                        ___x_cmd_advise_get_help "$(xrc which x-cmd/_v0/x.json)" boot '' ;;
    esac
}

xrc setmain ___x_cmd_boot
