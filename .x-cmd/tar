#! /usr/bin/env xsh

case "$1" in
    core)       scope=core ;;
    all|"")     scope=all ;;
    *)          return 1 ;;
esac

WSROOT="$(x wsroot)"

cd "$WSROOT/mod" &&
mkdir -p "$WSROOT/dist" &&
    eval "tar cvf $scope.tar $(x lsfile "$scope" | tr '\n' ' ')" &&
    mv $scope.tar "$WSROOT/dist/$scope.tar" &&
    ls -alh "$WSROOT/dist/$scope.tar"

