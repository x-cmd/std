# shellcheck shell=sh disable=SC1072 #source
x log init ui
. ./latest
test_table(){
    . ./.x-cmd/dev/testcase/ui_table_testcase
}
test_form(){
    . ./.x-cmd/dev/testcase/ui_form_testcase
}
test_grid(){
    . ./.x-cmd/dev/testcase/ui_gridselect_testcase
}
test_category(){
    . ./.x-cmd/dev/testcase/ui_categoryselect_testcase
}
test_catsel(){
    . ./.x-cmd/dev/testcase/ui_catsel_testcase
}
test_tf(){
    . ./.x-cmd/dev/testcase/ui_tf_testcase
}
test_select(){
    . ./.x-cmd/dev/testcase/ui_select_testcase
}

case "$1" in
    table|form|grid|select|category|catsel|tf)
        test_${1} ;;
    bash3|bash4|bash5)
        docker run -it -v "$(pwd)":/ui "xcmd/${1}-dev" bash -i -c "x update nightly && cd ui && x test && x test table"
        ;;
    alpine|ubuntu|centos|debian)
        docker run -it -v "$(pwd)":/ui "xcmd/${1}-dev" sh -i -c "x update nightly  && cd ui && x test && x test table"
        ;;
    *)
        ui_log info "copy all files from ./* to ~/.x-cmd/ui/"
        cp -r ./* ~/.x-cmd/ui
        . ~/.x-cmd/xrc/latest
        echo "Usage: x test {copy|bash:3|bash:4|bash:5|alpine|ubuntu|centos|table|form|grid|select|category|catsel|tf}"
        return 1
        ;;
esac