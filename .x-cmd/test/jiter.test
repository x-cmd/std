
code="$(cat default.awk json.awk jiter.awk jdict.awk jiparse.awk)"

awk "$code"'

function handle( token ){
    if (token == "") return

    jiter_print_rmatch( token, "comm", "", "\n" )
    # if ( jiter_target_rmatch( _, token, "c" ) == true ) {
    #     print jstr( _ )
    #     delete _
    # }

}

{
    l = json_split2tokenarr( arr, $0 )
    for (i=1; i<=l; ++i) {
        handle( arr[ i ] )
    }
}

' <<A
[
    {
        "message": "",
        "commit1": [
            {
                "sha": "17b952bbc9fa014ac33dc732510aaaa2d616c5eb",
                "date": "2021-08-01T10:44:41+00:00"
            },
            {
                "sha": "17b952bbc9fa014ac33dc732510aaaa2d616c5eb",
                "date": "2021-08-01T10:44:41+00:00"
            },
            {
                "sha": "17b952bbc9fa014ac33dc732510aaaa2d616c5eb",
                "date": "2021-08-01T10:44:41+00:00"
            }
        ],
        "nnn": ["eee1", "eee2"]
    },
    {
        "name": "v1.0.0",
        "message": "xxxxx",
        "commit2": {
            "sha": "222088ffaaf2808e34a4c108a5103e385ef5d853392",
            "date": "2021-08-01T07:32:52+00:00"
        }
    },
    {
        "aaa": {
            "a1": "www",
            "a2": "www",
            "a3": "www",
            "a4": "www",
            "a5": "www",
            "b1": ["eee1", "eee2"]
        },
        "commit3": {
            "sha": "333088ffaaf2808e34a4c108a5103e385ef5d853392",
            "date": "2021-08-01T07:32:52+00:00"
        },
    }
]
A

