# shellcheck shell=sh disable=SC2039,SC2142,SC3043

param_option2json(){
    param:dsl <<A
option:
    -y|--fsdfsd|-o          "Test regex arg1"       <regex_arg1>=888  =~  "[0-9]+"
    -w                      "Test regex arg2"       <regex_arg2>=asd  =~  "[A-Za-z]+"
    --old_option            "Test regex arg3"       <regex_arg3>=456
    --del_option            "Test regex arg4"       <regex_arg4>=789
    --name                  "Release name"          <>=""
    --no_issue              "Whether to disable issue"
    --no_wiki               "test wiki"
A
    param:run
    local has_value="aaa"
    local add_value="bbb"
    param:option2json has_issues=^no_issue has_wiki=^no_wiki h=^^has_value n=^^no_value new_option=old_option -del_option +add_value
}

test_param_option2json(){
    local INDENT=4
    @assert stdout 'param_option2json -y 123 -w asd --no_wiki | x jo fmt' <<A
{
    "has_issues": true,
    "has_wiki": false,
    "h": true,
    "n": false,
    "new_option": 456,
    "add_value": "bbb",
    "y": "123",
    "w": "asd"
}
A
}
@assert:file:func