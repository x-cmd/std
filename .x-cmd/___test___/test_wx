# shellcheck shell=sh disable=SC1072,SC3043 #source

test_pkg(){
    @assert true "(cd $(x wsroot) && x wx pkg)"
    @assert true "(cd $(x wsroot) && x wx pkg . test.wx)"
}

test_unpkg(){
    @assert "$(cd "$(x wsroot)" && x wx unpkg wx.wx)" "=~" "$HOME/.x-cmd/.tmp/wx/unpkg/[a-z0-9]*"
}

test_run(){
    # TODO: to make @padpar/script/demo.wx public.
    @assert stdout "(
        cd $(x wsroot)
        x wx run
        x wx run test.wx
        # x wx run @padpar/script/demo.wx
        # x wx @padpar/script/demo.wx
    )" <<A
Hello WX !!!
Hello WX !!!
A
}

@assert:file:func