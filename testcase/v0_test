# shellcheck shell=sh

. ./testcase/v0_test_base

##################
## Test functions
##################

test_proxy_advise_json() {
  assert_stdout "advise cat proxy" <<A
{
  "set": null,
  "unset": null,
  "version": null,
  "pip": {
    "url": {
      "qinghua|qh|tsinghua|tuna": null,
      "ustc": null,
      "aliyun": null,
      "huazhong": null,
      "douban": null,
      "tencent|qq|weixin": null
    },
    "set": {
      "qinghua|qh|tsinghua|tuna": null,
      "ustc": null,
      "aliyun": null,
      "huazhong": null,
      "douban": null,
      "tencent|qq|weixin": null
    },
    "unset": {
    }
  },
  "npm": {
    "url": {
      "aliyun|ali": null,
      "official": null
    },
    "set": {
      "aliyun|ali": null,
      "official": null
    },
    "get": {
    },
    "unset": {
    }
  },
  "maven": null,
  "go": {
    "auto|autoset": {
    },
    "reset|reset": null,
    "gosumdb|sumdb|sum|gosum": {
      "set": {
      },
      "unset|reset|clear": {
      }
    },
    "set": {
      "aliyun|ali": null,
      "goproxy|goproxy": null,
      "qiniu|io|goproxy": null,
      "official": null
    },
    "service": {
    },
    "version": null,
    "tutorial|xman": {
    },
    "help": null
  },
  "gem": null,
  "cargo": null,
  "apt": {
    "url": {
      "ali": null,
      "tuna": null
    },
    "set": {
      "ali": null,
      "tuna": null
    },
    "unset": null
  },
  "yum": null,
  "brew": {
    "url": {
      "tuna|tsinghua|qh": null,
      "aliyun|ali": null,
      "tencent": null,
      "bfsu": null,
      "ustc": null,
      "custom": null
    },
    "get": {
    },
    "set": {
      "--verbose|-v": null,
      "bfsu": null,
      "tuna|tsinghua|qh": null,
      "tencent": null,
      "aliyun|ali": null,
      "ustc": null,
      "custom": null
    },
    "unset": {
      "--verbose|-v": null
    }
  },
  "apk": null
}
A
}

##################
## Run test
##################

if [ -z "$XRC_NO_ADVISE" ] && [ -n "${BASH_VERSION}${ZSH_VERSION}" ] && [ "${-#*i}" != "$-" ]; then
    test_proxy_advise_json
fi

# . ./testcase/v0_test_brew

. ./testcase/v0_test_apt
test_different_version_for_ubuntu
test_different_version_for_debian

# . ./testcase/v0_test_npm
# . ./testcase/v0_test_pip
# . ./testcase/v0_test_go
