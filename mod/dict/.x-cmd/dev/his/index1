# Author:       Li Junhao       l@x-cmd.com         #xrc
# shellcheck    shell=sh        disable=SC3043

# Section: main

___x_cmd_dict(){
    local op=${1:?Provide op}
    local O="${O:-DEFAULT}"

    if [ "${1#@}" != "$op" ]; then
        O="${1#@}"
        op="${2:-help}"
        [ $# -gt 1 ] && shift 2
    else
        shift
    fi
    O="___X_BASH_DICT_${O}"
    case "$op" in
        new)                ___x_cmd_dict_new "$@"   ;;
        del)                ___x_cmd_dict_del "$@"   ;;
        make)               ___x_cmd_dict_make "$@"   ;;
        free)               ___x_cmd_dict_free "$@"  ;;
        get)                ___x_cmd_dict_get "$@" ;;
        put)                ___x_cmd_dict_put "$@" ;;
        scope)              ___x_cmd_dict_scope "$@"   ;;
        remove)             ___x_cmd_dict_remove "$@" ;;
        clear)              ___x_cmd_dict_clear "$@" ;;
        drop)               ___x_cmd_dict_drop "$@" ;;
        dropr)              ___x_cmd_dict_dropr "$@" ;;
        grep)               ___x_cmd_dict_grep "$@" ;;
        grepr)              ___x_cmd_dict_grepr "$@" ;;
        iter)               ___x_cmd_dict_iter "$@" ;;
        load)               ___x_cmd_dict_load "$@" ;;
        load_json)          ___x_cmd_dict_load_json "$@" ;;
        dump)               ___x_cmd_dict_dump "$@" ;;
        json)               ___x_cmd_dict_json "$@" ;;
        size)               ___x_cmd_dict_size "$@" ;;
        has)                ___x_cmd_dict_has "$@"  ;;
        is_empty)           ___x_cmd_dict_is_empty "$@" ;;
        _x_cmd_advise_json) ___x_cmd_dict_x_cmd_advise_json "$@" ;;
        *)                  : help ;;
    esac
}

xrc:mod dict/lib/pipe dict/lib/share

if [ -n "${BASH_VERSION}" ]; then
    case "${BASH_VERSION}" in
        3*|4.0*|4.1*)
            xrc:mod dict/lib/str
            # . ./lib/str
            ;;
        *)
            xrc:mod dict/lib/bash4
            ;;
    esac
elif [ -n "${ZSH_VERSION}" ]; then
    xrc:mod dict/lib/zsh
else
    xrc:mod dict/lib/str
fi

xrc setmain ___x_cmd_dict

## EndSection
