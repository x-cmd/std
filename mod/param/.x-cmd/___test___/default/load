# shellcheck shell=sh disable=SC2039,SC2142,SC3043

# Section: test prepare

test_json="$(cat <<A
{
  "e${arg_sep}arg1": "1",
  "e${arg_sep}arg2": "11",
  "e${arg_sep}arg3": "111"
}
A
)"

json_path="$(x wsroot)/.x-cmd/testcase_pre/test_json"
printf "%s\n" "$test_json" > "$json_path"

# EndSection

test_param_default_load(){
    param_default clear cc/e
    param_default load cc/e "${json_path}"
    param_default remove cc/e arg1

    case "$BASH_VERSION" in
        5*)     @assert stdout param_default dump cc<<A
{
  "e${arg_sep}arg3": "111",
  "e${arg_sep}arg2": "11"
}
A
            ;;
        *)      @assert stdout param_default dump cc<<A
{
  "e${arg_sep}arg2": "11",
  "e${arg_sep}arg3": "111"
}
A
    esac
}

@assert:file:func