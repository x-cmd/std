# shellcheck shell=sh

# Section: test prepare
param_gh(){
    param:subcmd param_gh                            \
        "repo|re"           "repo command"           \
        current             "set current owner, repo"
    param:subcmd:try

    param:subcmd param_gh_repo                       \
        release       "manage release"               \
        member        "Authorize gh"
    param:subcmd:try

    param:subcmd param_gh_org        \
        del           "delete org"
    param:subcmd:try
    param:run
}

param_gh_repo(){
    param:subcmd param_gh_repo                \
        create         "create repo"          \
        rm             "remove repo"
    param:subcmd:try

    param:dsl <<A
advise:
    #1          ___x_cmd_tldr_lsname
options:
    #1          "use the selected file to rollback"
A
    param:run
}

param_gh_repo_release(){
    param:dsl <<A
advise:
    #1          ___x_cmd_tldr_lang
options:
    #1          "use the selected file to rollback"
A
    param:run
}

param_gh_repo_member(){
    param:void
}

param_gh_repo_create(){
    param:void
}

param_gh_repo_rm(){
    param:void
}

param_gh_current(){
    param:void
}

param_gh_org_del(){
    param:void
}
# EndSection

test_param_subcmd_advise(){
    local INDENT=4
  @assert stdout "X_CMD_ADVISE_FUNC_NAME=param_gh param_gh _x_cmd_advise_json | x jo fmt"<<A
{
    "#desc": "",
    "repo|re": {
        "#desc": "repo command",
        "#1": {
            "#desc": "use the selected file to rollback",
            "#exec": "___x_cmd_tldr_lsname"
        },
        "create": {
            "#desc": "create repo"
        },
        "rm": {
            "#desc": "remove repo"
        }
    },
    "current": {
        "#desc": "set current owner, repo"
    },
    "release": {
        "#desc": "manage release",
        "#1": {
            "#desc": "use the selected file to rollback",
            "#exec": "___x_cmd_tldr_lang"
        }
    },
    "member": {
        "#desc": "Authorize gh"
    },
    "del": {
        "#desc": "delete org"
    }
}
A
}

@assert:file:func