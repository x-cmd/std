

region_read_ch_loop(){
    local escape_char
    escape_char=$(printf "\033")

    while read -rsn1 ch; do
        if [ "$ch" = "$escape_char" ]; then
            read -rsn1 ch # read 2 more chars

            case "$ch" in
                \[) 
                    read -rsn1 ch # read 2 more chars
                    case "$ch" in
                        'A')       printf "%s" UP ;;
                        'B')       printf "%s" DN ;;
                        'D')       printf "%s" LEFT ;;
                        'C')       printf "%s" RIGHT ;;
                        *)         printf "%s" "[$ch";;
                    esac
                    ;;
                q)  
                    printf "%s" QUITTING ; 
                    return 
                    ;;
                *)
                    printf "%s" "$ch"

            esac
            continue
        fi

        # handle the 
        printf "%s" "${#ch}"
    done
}


read1(){
    stty raw
    REPLY="$(dd bs=1 count=1 2> /dev/null)"
    stty -raw
}
